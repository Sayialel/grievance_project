{% extends 'base.html' %}
{% load static %}
{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="container-fluid py-5 px-4" style="background: linear-gradient(135deg, #115740 0%, #1a8753 100%); min-height: 100vh;">
  <div class="row justify-content-center mb-4">
    <div class="col-12 text-center">
      <div class="text-warning mb-2">
        <i class="fas fa-user-cog fa-3x"></i>
      </div>
      <h2 class="text-white fw-bold">Environmental Admin Dashboard</h2>
      <p class="lead text-white-50">Manage the entire environmental reporting system</p>
    </div>
  </div>

  <div class="row g-4">
    <div class="col-12 col-xl-8">
      <div class="card border-0 shadow-lg mb-4" style="background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-radius: 15px;">
        <div class="card-header bg-transparent d-flex justify-content-between align-items-center py-4 border-0">
          <div class="d-flex align-items-center">
            <div class="bg-success rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 45px; height: 45px;">
              <i class="fas fa-chart-line text-white"></i>
            </div>
            <h4 class="mb-0 text-success">System Overview</h4>
          </div>
          <span class="badge bg-danger px-3 py-2">Administrator</span>
        </div>
                  <div class="card-body p-4">
          <div class="row g-4 mb-4">
            <div class="col-md-3">
              <div class="card border-0 shadow h-100" style="background: linear-gradient(45deg, #3498db, #2980b9); border-radius: 15px;">
                <div class="card-body text-center p-4">
                  <div class="text-white mb-3 opacity-75">
                    <i class="fas fa-clipboard-list fa-2x"></i>
                  </div>
                  <h6 class="card-title text-white mb-3">Total Complaints</h6>
                  <h2 class="display-4 text-white fw-bold mb-0">{{ total_complaints }}</h2>
                  <div class="mt-3 text-white-50 small">Environmental issues reported</div>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card border-0 shadow h-100" style="background: linear-gradient(45deg, #f39c12, #d35400); border-radius: 15px;">
                <div class="card-body text-center p-4">
                  <div class="text-white mb-3 opacity-75">
                    <i class="fas fa-exclamation-triangle fa-2x"></i>
                  </div>
                  <h6 class="card-title text-white mb-3">Pending</h6>
                  <h2 class="display-4 text-white fw-bold mb-0">{{ pending_count }}</h2>
                  <div class="mt-3 text-white-50 small">Awaiting assignment</div>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card border-0 shadow h-100" style="background: linear-gradient(45deg, #3498db, #2980b9); border-radius: 15px;">
                <div class="card-body text-center p-4">
                  <div class="text-white mb-3 opacity-75">
                    <i class="fas fa-spinner fa-2x"></i>
                  </div>
                  <h6 class="card-title text-white mb-3">In Progress</h6>
                  <h2 class="display-4 text-white fw-bold mb-0">{{ in_progress_count }}</h2>
                  <div class="mt-3 text-white-50 small">Being addressed</div>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card border-0 shadow h-100" style="background: linear-gradient(45deg, #2ecc71, #27ae60); border-radius: 15px;">
                <div class="card-body text-center p-4">
                  <div class="text-white mb-3 opacity-75">
                    <i class="fas fa-check-circle fa-2x"></i>
                  </div>
                  <h6 class="card-title text-white mb-3">Resolved</h6>
                  <h2 class="display-4 text-white fw-bold mb-0">{{ resolved_count }}</h2>
                  <div class="mt-3 text-white-50 small">Successfully addressed</div>
                </div>
              </div>
            </div>
          </div>

          <h5 class="fw-bold text-success mb-4"><i class="fas fa-chart-pie me-2"></i>Environmental Management Overview</h5>
          <div class="row g-4">
            <div class="col-md-6">
              <div class="card border-0 shadow h-100" style="border-radius: 15px; overflow: hidden;">
                <div class="card-body p-4">
                  <div class="d-flex align-items-center mb-3">
                    <div class="bg-success rounded-circle d-inline-flex align-items-center justify-content-center me-3" style="width: 45px; height: 45px;">
                      <i class="fas fa-users text-white"></i>
                    </div>
                    <h5 class="card-title mb-0 text-success">Environmental Officers</h5>
                  </div>
                  <div class="d-flex align-items-center mb-3">
                    <div class="display-4 fw-bold text-success me-3">{{ total_officers }}</div>
                    <div class="text-muted">Active officers monitoring environmental issues across regions</div>
                  </div>
                  <div class="progress mb-3" style="height: 8px; border-radius: 4px;">
                    <div class="progress-bar bg-success" role="progressbar" style="width: {{ officers_percentage }}%;" aria-valuenow="{{ officers_percentage }}" aria-valuemin="0" aria-valuemax="100"></div>
                  </div>
                </div>
                <div class="card-footer bg-transparent border-top p-3">
                  <a href="#" class="btn btn-success w-100">
                    <i class="fas fa-user-cog me-2"></i> Manage Environmental Officers
                  </a>
                </div>
              </div>
            </div>

            <div class="col-md-6">
              <div class="card border-0 shadow h-100" style="border-radius: 15px; overflow: hidden;">
                <div class="card-body p-4">
                  <div class="d-flex align-items-center mb-3">
                    <div class="bg-success rounded-circle d-inline-flex align-items-center justify-content-center me-3" style="width: 45px; height: 45px;">
                      <i class="fas fa-leaf text-white"></i>
                    </div>
                    <h5 class="card-title mb-0 text-success">Environmental Impact</h5>
                  </div>
                  <h6 class="mb-3">Resolution Rate</h6>
                  {% if total_complaints > 0 %}
                      <div class="progress mb-3" style="height: 25px; border-radius: 12px; box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);">
                        <div class="progress-bar bg-success" role="progressbar" style="width: {{ resolution_rate }}%; border-radius: 12px;" 
                             aria-valuenow="{{ resolution_rate }}" aria-valuemin="0" aria-valuemax="100">
                          {{ resolution_rate }}%
                        </div>
                      </div>
                      <div class="d-flex justify-content-between">
                        <span class="badge bg-success px-3 py-2 rounded-pill">{{ resolved_count }} resolved</span>
                        <span class="text-muted">out of {{ total_complaints }} total reports</span>
                      </div>
                      <div class="mt-3 text-center">
                        <div class="eco-impact-meter d-flex justify-content-between">
                          <span><i class="fas fa-seedling text-success"></i></span>
                          <span><i class="fas fa-tree text-success"></i></span>
                          <span><i class="fas fa-forest text-success"></i></span>
                        </div>
                        <div class="text-muted small mt-1">Environmental impact level</div>
                      </div>
                  {% else %}
                    <div class="alert" style="background-color: rgba(46,204,113,0.1); color: #27ae60; border-radius: 10px; border-left: 4px solid #27ae60;">
                      <i class="fas fa-info-circle me-2"></i>
                      No environmental issues have been reported yet.
                    </div>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-12 col-xl-4">
      <div class="card border-0 shadow-lg mb-4" style="background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-radius: 15px;">
        <div class="card-header bg-transparent border-0 py-4">
          <div class="d-flex align-items-center">
            <div class="bg-success rounded-circle d-inline-flex align-items-center justify-content-center me-3" style="width: 45px; height: 45px;">
              <i class="fas fa-sliders-h text-white"></i>
            </div>
            <h4 class="mb-0 text-success">Administrator Controls</h4>
          </div>
        </div>
        <div class="card-body p-4">
          <div class="d-flex align-items-center p-3 mb-4 rounded-3" style="background: rgba(46,204,113,0.1);">
            <div class="bg-success rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 60px; height: 60px;">
              <i class="fas fa-user-shield fa-2x text-white"></i>
            </div>
            <div>
              <h5 class="text-success mb-1">{{ email }}</h5>
              <div class="d-flex align-items-center">
                <span class="badge bg-success me-2">System Administrator</span>
                <span class="text-muted small"><i class="fas fa-circle text-success me-1" style="font-size: 8px;"></i> Online</span>
              </div>
            </div>
          </div>

          <div class="list-group mb-4" style="border-radius: 10px; overflow: hidden;">
            <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center p-3 border-0 mb-2" style="background: rgba(46,204,113,0.1); border-radius: 10px;">
              <div class="d-flex align-items-center">
                <div class="bg-success rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                  <i class="fas fa-users text-white"></i>
                </div>
                <span class="text-success">Manage Officers</span>
              </div>
              <span class="badge bg-success rounded-pill px-3">{{ total_officers }}</span>
            </a>
            <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center p-3 border-0 mb-2" style="background: rgba(52,152,219,0.1); border-radius: 10px;">
              <div class="d-flex align-items-center">
                <div class="bg-info rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                  <i class="fas fa-clipboard-list text-white"></i>
                </div>
                <span class="text-info">All Complaints</span>
              </div>
              <span class="badge bg-info rounded-pill px-3">{{ total_complaints }}</span>
            </a>
            <a href="#" class="list-group-item list-group-item-action d-flex align-items-center p-3 border-0 mb-2" style="background: rgba(155,89,182,0.1); border-radius: 10px;">
              <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                <i class="fas fa-cogs text-white"></i>
              </div>
              <span class="text-primary">System Configuration</span>
            </a>
            <a href="#" class="list-group-item list-group-item-action d-flex align-items-center p-3 border-0" style="background: rgba(241,196,15,0.1); border-radius: 10px;">
              <div class="bg-warning rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                <i class="fas fa-chart-bar text-white"></i>
              </div>
              <span class="text-warning">Environmental Reports</span>
            </a>
          </div>

          <div class="row g-3">
            <div class="col-6">
              <a href="#" class="btn btn-success w-100 p-3" style="border-radius: 10px;">
                <i class="fas fa-plus-circle me-2"></i> New Notice
              </a>
            </div>
            <div class="col-6">
              <a href="#" class="btn btn-danger w-100 p-3" style="border-radius: 10px;">
                <i class="fas fa-shield-alt me-2"></i> Security Audit
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Environmental Statistics Widget -->
      <div class="card border-0 shadow-lg" style="background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-radius: 15px;">
        <div class="card-header bg-transparent border-0 py-4">
          <div class="d-flex align-items-center">
            <div class="bg-success rounded-circle d-inline-flex align-items-center justify-content-center me-3" style="width: 45px; height: 45px;">
              <i class="fas fa-globe-americas text-white"></i>
            </div>
            <h4 class="mb-0 text-success">Environmental Impact</h4>
          </div>
        </div>
        <div class="card-body p-4">
          <div class="row g-3 text-center">
            <div class="col-6">
              <div class="p-3 rounded" style="background: rgba(46,204,113,0.1);">
                <i class="fas fa-tree fa-2x mb-2 text-success opacity-75"></i>
                <h3 class="text-success mb-0">{{ total_complaints|default:0 }}</h3>
                <p class="small text-muted mb-0">Issues Reported</p>
              </div>
            </div>
            <div class="col-6">
              <div class="p-3 rounded" style="background: rgba(46,204,113,0.1);">
                <i class="fas fa-seedling fa-2x mb-2 text-success opacity-75"></i>
                <h3 class="text-success mb-0">{{ resolved_count|default:0 }}</h3>
                <p class="small text-muted mb-0">Environments Improved</p>
              </div>
            </div>
          </div>

          <div class="mt-4">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <span class="fw-bold text-success">Environmental Health Index</span>
              <span class="badge bg-success px-2 py-1">Good</span>
            </div>
            <div class="progress" style="height: 10px; border-radius: 5px;">
              <div class="progress-bar bg-success" role="progressbar" style="width: 65%" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <p class="text-muted small mt-2">Based on resolution rate and response time</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
